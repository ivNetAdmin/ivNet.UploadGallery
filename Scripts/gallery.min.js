var Gallery = angular.module('ivNet.Gallery', ['ngResource', 'trNgGrid'])

Gallery.factory('galleryList', function ($resource) {
    return $resource('/api/gallery/list/:id', null,
    {
        'query': { method: 'GET', isArray: true }
    });
});

Gallery.controller('GalleryListController', function ($scope, $filter, $attrs,
    galleryList) {

    $scope.$watch('galleryDetails[0]', function (value) {
   
        if (value === undefined) {

        } else {
            window.location.href = 'http://localhost:30233/gallery?' + value.Name;
        }
    });

    init();

    function init() {
        $scope.galleryDetails = [];
        galleryList.get({},
            function (data) {
                $scope.show_gallery_fields = ['ImageUrl', 'Name', 'ImageCount'];
                $scope.galleries = data.Galleries;
                $('tfoot').hide();
                $('thead').hide();
            },
            function(error) {
                alert(error.data.Message + ' [' + error.data.MessageDetail + ']');
            });
    };
});